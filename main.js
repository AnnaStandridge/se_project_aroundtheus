!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement}getView(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=`Photo of ${this._name}`,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))})),this.toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),this.setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this._popupElement.removeEventListener("click",this._closeModalOnClick),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};_closeModalOnClick=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()};setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",this._closeModalOnClick)}}class n extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s}_getInputValues(){const e={};return this._inputList=document.querySelectorAll(".modal__form-input"),this._inputList.forEach((t=>{""!==t.value&&(e[t.name]=t.value)})),e}_handleSubmit=()=>{const e=this._getInputValues();this._handleFormSubmit(e)};setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleSubmit)}close(){this._popupForm.reset(),super.close(),this._popupForm.removeEventListener("submit",this._handleSubmit)}}const o=document.querySelector("#profile-edit-button"),i=document.querySelector("#profile-edit-modal"),r=document.querySelector("#add-card-button"),l=document.querySelector("#add-card-modal"),a=(document.querySelector("#preview-image-modal"),document.querySelector("#profile-title")),c=document.querySelector("#profile-description"),u=i.querySelector(".modal__form"),d=l.querySelector(".modal__form"),m=document.querySelector("#profile-title-input"),_=document.querySelector("#profile-description-input"),p=document.querySelector(".cards__list"),h={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"},E=new t(h,u);E.enableValidation();const S=new t(h,d);S.enableValidation();const v=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._containerElement=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerElement.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{let{name:t,link:s}=e;const n=L({name:t,link:s});v.addItem(n)}},p);v.renderItems();const g=new class{constructor(e,t){this._nameElement=e,this._jobElement=t}getUserInfo(){const e={};return e.profileName=this._nameElement.textContent,e.description=this._jobElement.textContent,e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}(a,c),k=new n({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{g.setUserInfo(e.title,e.description),k.close()}}),f=new n({popupSelector:"#add-card-modal",handleFormSubmit:function(e){let{title:t,url:s}=e;const n=L({name:t,link:s});v.addItem(n),f.close()}}),b=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._previewImageEl=document.querySelector(".modal__image"),this._previewImageCaption=document.querySelector(".modal__caption")}open(e){let{name:t,link:s}=e;this._previewImageEl.alt=t,this._previewImageCaption.textContent=t,this._previewImageEl.src=s,super.open()}}({popupSelector:"#preview-image-modal"});function L(t){let{name:s,link:n}=t;const o=new e({name:s,link:n},"#card-template",(e=>{let{name:t,link:s}=e;b.open({name:t,link:s})}));return o.getView()}o.addEventListener("click",(function(){const{profileName:e,description:t}=g.getUserInfo();m.value=e,_.value=t,E.toggleButtonState(),k.open()})),r.addEventListener("click",(()=>{S.toggleButtonState(),f.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLLENBQUVsRSxPQUFNRSxRQUFPLElBR25DLE9BQU9zSSxFQUFZbkgsU0FDckIsQ0FVQW1FLEVBQWtCakYsaUJBQWlCLFNBckNuQyxXQUNFLE1BQU0sWUFBRW1JLEVBQVcsWUFBRVYsR0FBZ0JaLEVBQVNLLGNBQzlDekIsRUFBa0JaLE1BQVFzRCxFQUMxQnpDLEVBQXdCYixNQUFRNEMsRUFDaEM1QixFQUFrQnJELG9CQUNsQitFLEVBQWlCNUQsTUFDbkIsSUFpQ0F3QixFQUFjbkYsaUJBQWlCLFNBQVMsS0FDdEM4RixFQUFpQnRELG9CQUNqQmtGLEVBQWEvRCxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKCkpO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBQaG90byBvZiAke3RoaXMuX25hbWV9YDtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBgYDtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbHMuc29tZSgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZU1vZGFsT25DbGljayk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfY2xvc2VNb2RhbE9uQ2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcclxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZU1vZGFsT25DbGljayk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0T2JqID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlmIChpbnB1dC52YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgIGlucHV0T2JqW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0T2JqO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVN1Ym1pdCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLypFbGVtZW50cyovXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG4vKldyYXBwZXJzKi9cclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbi8qVmFsaWRhdGlvbiovXHJcbmV4cG9ydCBjb25zdCBvcHRpb25zID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlRWRpdE1vZGFsLFxyXG4gIGFkZENhcmRCdXR0b24sXHJcbiAgYWRkQ2FyZE1vZGFsLFxyXG4gIHByZXZpZXdJbWFnZU1vZGFsLFxyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGNhcmRMaXN0LFxyXG4gIG9wdGlvbnMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLypWYWxpZGF0aW9uKi9cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgYWRkQ2FyZEZvcm0pO1xyXG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8qUmVuZGVyIENhcmQqL1xyXG5jb25zdCBjYXJkTGlzdFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6ICh7IG5hbWUsIGxpbmsgfSkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XHJcbiAgICAgIGNhcmRMaXN0U2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNhcmRMaXN0XHJcbik7XHJcblxyXG5jYXJkTGlzdFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8qRm9ybSBEYXRhKi9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZVRpdGxlLCBwcm9maWxlRGVzY3JpcHRpb24pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRPYmopID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0T2JqLnRpdGxlLCBpbnB1dE9iai5kZXNjcmlwdGlvbik7XHJcbiAgICBlZGl0UHJvZmlsZU1vZGFsLmNsb3NlKCk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBvcGVuRWRpdFByb2ZpbGVNb2RhbCgpIHtcclxuICBjb25zdCB7IHByb2ZpbGVOYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBlZGl0UHJvZmlsZU1vZGFsLm9wZW4oKTtcclxufVxyXG5cclxuY29uc3QgbmV3Q2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogc3VibWl0Q2FyZCxcclxufSk7XHJcblxyXG5jb25zdCBpbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIsXHJcbn0pO1xyXG5cclxuLypGdW5jdGlvbnMqL1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIHsgbmFtZSwgbGluayB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgKHsgbmFtZSwgbGluayB9KSA9PiB7XHJcbiAgICAgIGltYWdlTW9kYWwub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRDYXJkKHsgdGl0bGUsIHVybCB9KSB7XHJcbiAgY29uc3QgbmV3Q2FyZERhdGEgPSB7IG5hbWU6IHRpdGxlLCBsaW5rOiB1cmwgfTtcclxuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChuZXdDYXJkRGF0YSk7XHJcbiAgY2FyZExpc3RTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgbmV3Q2FyZE1vZGFsLmNsb3NlKCk7XHJcbn1cclxuXHJcbi8qRXZlbnQgTGlzdGVuZXJzKi9cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5FZGl0UHJvZmlsZU1vZGFsKTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgbmV3Q2FyZE1vZGFsLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gY29udGFpbmVyRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhZGRJdGVtKGRvbUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5wcmVwZW5kKGRvbUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lRWxlbWVudCwgam9iRWxlbWVudCkge1xyXG4gICAgICB0aGlzLl9uYW1lRWxlbWVudCA9IG5hbWVFbGVtZW50O1xyXG4gICAgICB0aGlzLl9qb2JFbGVtZW50ID0gam9iRWxlbWVudDtcclxuICAgIH1cclxuICBcclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICBjb25zdCB1c2VyT2JqZWN0ID0ge307XHJcbiAgICAgIHVzZXJPYmplY3RbXCJwcm9maWxlTmFtZVwiXSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgICB1c2VyT2JqZWN0W1wiZGVzY3JpcHRpb25cIl0gPSB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgICByZXR1cm4gdXNlck9iamVjdDtcclxuICAgIH1cclxuICBcclxuICAgIHNldFVzZXJJbmZvKG5hbWVJbnB1dCwgam9iSW5wdXQpIHtcclxuICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lSW5wdXQ7XHJcbiAgICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2JJbnB1dDtcclxuICAgIH1cclxuICB9IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWwuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWwuc3JjID0gbGluaztcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZSIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsIm9wdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfaW5wdXRFbHMiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9jbG9zZU1vZGFsT25DbGljayIsIl9oYW5kbGVFc2NDbG9zZSIsImtleSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqIiwiX2lucHV0TGlzdCIsImlucHV0IiwidmFsdWUiLCJfaGFuZGxlU3VibWl0IiwiaW5wdXRWYWx1ZXMiLCJyZXNldCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsImFkZENhcmRCdXR0b24iLCJhZGRDYXJkTW9kYWwiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkRm9ybSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTGlzdCIsImZvcm1TZWxlY3RvciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZFZhbGlkYXRvciIsImNhcmRMaXN0U2VjdGlvbiIsImNvbnRhaW5lckVsZW1lbnQiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZG9tRWxlbWVudCIsInByZXBlbmQiLCJuZXdDYXJkIiwiY3JlYXRlQ2FyZCIsInVzZXJJbmZvIiwibmFtZUVsZW1lbnQiLCJqb2JFbGVtZW50IiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsInVzZXJPYmplY3QiLCJzZXRVc2VySW5mbyIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiZWRpdFByb2ZpbGVNb2RhbCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJuZXdDYXJkTW9kYWwiLCJfcmVmNCIsInVybCIsImltYWdlTW9kYWwiLCJfcHJldmlld0ltYWdlRWwiLCJfcHJldmlld0ltYWdlQ2FwdGlvbiIsIl9yZWYyIiwiY2FyZEVsZW1lbnQiLCJfcmVmMyIsInByb2ZpbGVOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==